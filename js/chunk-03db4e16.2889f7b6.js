(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03db4e16"],{"24b7":function(t,s,e){t.exports=e.p+"img/no_photo.42679fe8.png"},"4c40":function(t,s,e){"use strict";e.r(s);var o=function(){var t=this,s=t._self._c;return s("div",{staticClass:"store_one_product_block"},[s("div",{staticClass:"my_courses_header_block"},[s("div",{staticClass:"my_courses_header_container"},[s("div",{staticClass:"my_courses_header_label"},[t._v(" Онлайн магазин ")]),s("div",{staticClass:"my_courses_header_basket_block"},[s("router-link",{staticClass:"my_courses_header_basket",attrs:{to:"/store/basket"}},[s("div",{staticClass:"my_courses_header_basket_img"},[s("div",{staticClass:"my_courses_header_basket_number"},[t._v(t._s(t.countOfGoods))])]),s("div",{staticClass:"my_courses_header_basket_text"},[t._v(t._s(t.$t("Basket")))])])],1)])]),s("div",{staticClass:"store_one_product_main_block"},[s("div",{staticClass:"store_main_container"},[s("div",{staticClass:"store_filter_container"},[t.isAuthenticated?s("div",{staticClass:"store_coins"},[s("div",{staticClass:"store_coins_text"},[t._v("Количество коинов:")]),s("div",{staticClass:"store_coins_quantity"},[t._v(t._s(t.activeUserCoins))])]):t._e()]),s("div",{staticClass:"store_one_product"},[s("router-link",{staticClass:"store_one_product_arrow_back",attrs:{to:"/store"}}),s("div",{staticClass:"store_one_product_title"},[t._v(" "+t._s(this.productItemDesc.translations[0].name)+" ")]),s("div",{staticClass:"store_one_product_desc"},[s("div",{staticClass:"store_one_product_desc_slider"},[s("div",{staticClass:"store_one_product_desc_slider_block"},[s("div",{staticClass:"store_one_product_desc_slider_container_arrow_up",on:{click:t.showPrevImage}}),s("div",{staticClass:"store_one_product_desc_slider_container_arrow_down",on:{click:t.showNextImage}}),s("div",{staticClass:"store_one_product_desc_slider_container"},t._l(t.productItemDesc.gallery,(function(e){return s("img",{class:[t.activeImg(e.image)?t.activeClass:"",t.basicClass],attrs:{src:t.backUrl+e.image},on:{click:function(s){t.currentImg=e.image},error:t.setAltImg}})})),0)]),s("div",{staticClass:"store_one_product_desc_img"},[s("img",{attrs:{src:t.backUrl+t.currentImg},on:{error:t.setAltImg}})])]),s("div",{staticClass:"store_one_product_desc_text"},[s("div",{staticClass:"store_one_product_desc_price"},[s("div",{staticClass:"store_one_product_desc_price_text"},[t._v(t._s(t.$t("Price"))+":")]),s("div",{staticClass:"store_one_product_desc_price_num"},[t._v(t._s(this.productItemDesc.price))])]),s("div",{staticClass:"store_one_product_desc_available"},[t._v(" "+t._s(t.$t("Available_items"))+": "+t._s(this.productItemDesc.count)+" ")]),t.isAuthenticated?s("button",{staticClass:"store_one_product_desc_btn_add",on:{click:t.buyGood}},[t._v(t._s(t.$t("Add_to_Basket")))]):t._e(),t.isAuthenticated?s("button",{staticClass:"store_one_product_desc_btn_buy",on:{click:function(s){return t.buyGood(!0)}}},[t._v(t._s(t.$t("Buy_now")))]):t._e()])]),s("div",{staticClass:"store_one_product_about"},[s("div",{staticClass:"store_one_product_about_title"},[t._v(t._s(t.$t("Description")))]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showDescription,expression:"showDescription"}],staticClass:"store_one_product_about_text"},[t._v(" "+t._s(this.productItemDesc.translations[0].short_description)+" ")]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showDescription,expression:"showDescription"}],staticClass:"store_one_product_about_toggle",on:{click:function(s){t.showDescription=!1}}},[t._v(" Свернуть описание ")]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.showDescription,expression:"!showDescription"}],staticClass:"store_one_product_about_toggle",on:{click:function(s){t.showDescription=!0}}},[t._v(" Развернуть описание ")])]),s("div",{staticClass:"store_one_product_characteristic"},[s("div",{staticClass:"store_one_product_characteristic_title"},[t._v(" Общие характеристики ")]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showCharacteristic,expression:"showCharacteristic"}],staticClass:"store_one_product_char_desc"},[s("div",{staticClass:"store_one_product_char_item"},[s("div",{staticClass:"store_one_product_char_category"},[t._v("Категория")]),s("div",{staticClass:"store_one_product_char_text"},[t._v(t._s(t.productItemDesc.category.translations.find(({locale:s})=>s===t.$i18n.locale).name))])]),t._l(t.productItemDesc.property_values,(function(e,o){return s("div",{key:o,staticClass:"store_one_product_char_item"},[s("div",{staticClass:"store_one_product_char_category"},[t._v(t._s(e.key.translations.find(({locale:s})=>s===t.$i18n.locale).name))]),s("div",{staticClass:"store_one_product_char_text"},[t._v(t._s(e.translations.find(({locale:s})=>s===t.$i18n.locale).name))])])}))],2),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showCharacteristic,expression:"showCharacteristic"}],staticClass:"store_one_product_char_toggle_two",on:{click:function(s){t.showCharacteristic=!1}}},[t._v("Свернуть характеристики ")]),s("div",{directives:[{name:"show",rawName:"v-show",value:!t.showCharacteristic,expression:"!showCharacteristic"}],staticClass:"store_one_product_char_toggle_one",on:{click:function(s){t.showCharacteristic=!0}}},[t._v("Развернуть характеристики ")])])],1)])]),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showModal,expression:"showModal"}],staticClass:"store_modal"},[s("div",{staticClass:"store_modal_back",on:{click:function(s){t.showModal=!1}}}),s("div",{staticClass:"store_modal_front"},[s("div",{staticClass:"store_modal_front_title"},[t._v("Товар успешно добавлен в корзину")]),s("div",{staticClass:"store_modal_front_icon"}),s("router-link",{staticClass:"store_modal_front_btn",attrs:{to:"/store/basket"}},[t._v("Перейти в корзину")]),s("div",{staticClass:"store_modal_close_form",on:{click:function(s){t.showModal=!1}}})],1)])])},a=[],i=(e("14d9"),e("2b0e")),r={name:"StoreOneProduct",data(){return{basketNumber:12,deliveryNumber:0,showDescription:!1,showCharacteristic:!1,showModal:!1,productItemDesc:[],backUrl:window.API_ROOT+"/images/goods/",userCoins:null,showList:!1,checkList:[],noPhoto:e("24b7"),currentImg:"",activeClass:"store_one_product_desc_slider_active_img",basicClass:"store_one_product_desc_slider_basic_img",images:[],basketData:[],isAuthenticated:!!localStorage.getItem("token")}},methods:{handleHover(t){this.isHovered=t},addToBasket(){this.showModal=!0,this.basketNumber+=1},buyGood(t=!1){let s=this.$route.params.id;localStorage.getItem("basket_id")?this.$http.post(API_ROOT+"/api/shop/basket/add",{basket_id:localStorage.getItem("basket_id"),good_id:s}).then(s=>{console.log(s),t||(this.showModal=!0)}).then(s=>{t?this.$router.push("/store/basket"):this.quantityGoodsInBasket()}).catch(t=>{console.log(t)}):this.$http.post(API_ROOT+"/api/shop/basket/add",{good_id:s}).then(t=>{console.log(t),localStorage.setItem("basket_id",t.body.data.id),i["default"].toastr({message:"Success",description:"Product add to cart",type:"success"})}).then(s=>{t?this.$router.push("/store/basket"):this.quantityGoodsInBasket()}).catch(t=>{console.log(t)})},productItem(){let t=this.$route.params.id;this.$http.get(API_ROOT+"/api/shop/goods/"+t).then(t=>{this.productItemDesc=t.data,this.currentImg=this.mainImage(this.productItemDesc),this.images=this.imagesArr(this.productItemDesc)}).catch(t=>{console.log(t)})},setAltImg(t){t.target.src=this.noPhoto},mainImage(t){for(let s=0;s<t.gallery.length;s++)if(1===t.gallery[s].is_main)return t.gallery[s].image},activeImg(t){return this.currentImg===t},imagesArr(t){let s=[];for(let e=0;e<t.gallery.length;e++)s.push(t.gallery[e].image);return s},showNextImage(){let t=this.images.findIndex(t=>t===this.currentImg);t===this.images.length-1?this.currentImg=this.images[0]:this.currentImg=this.images[t+1]},showPrevImage(){let t=this.images.findIndex(t=>t===this.currentImg);this.currentImg=0===t?this.images[this.images.length-1]:this.images[t-1]},basketList(){if(localStorage.getItem("basket_id")){let t=localStorage.getItem("basket_id");this.$http.get(API_ROOT+`/api/shop/basket/goods?basket_id=${t} `).then(t=>{this.basketData=t.data.data}).catch(t=>{console.log(t),i["default"].toastr({message:"Error",description:t.message,type:"error"})})}},numberGoodsInBasket(){return localStorage.getItem("basket_count")?this.basketNumber=+localStorage.getItem("basket_count"):this.basketNumber=0}},mounted(){this.productItem(),this.basketList()},computed:{activeUserCoins(){return localStorage.getItem("coins")?this.userCoins=localStorage.getItem("coins"):this.userCoins=0},countOfGoods(){let t=0;for(let s=0;s<this.basketData.length;s++)t+=this.basketData[s].pivot.count;return t}}},c=r,_=e("2877"),n=Object(_["a"])(c,o,a,!1,null,"dbf26a08",null);s["default"]=n.exports}}]);
//# sourceMappingURL=chunk-03db4e16.2889f7b6.js.map