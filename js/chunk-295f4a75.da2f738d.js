(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-295f4a75"],{"21bf":function(t,s,e){},"24b7":function(t,s,e){t.exports=e.p+"img/no_photo.42679fe8.png"},"6d26":function(t,s,e){"use strict";var a=function(){var t=this,s=t._self._c;return t.totalPages>1?s("ul",{staticClass:"pagination"},[s("li",{staticClass:"pagination-item"},[s("button",{staticClass:"pagination_btn_prev",attrs:{type:"button",disabled:t.isInFirstPage},on:{click:t.onClickPreviousPage}},[s("span",[t._v("Предыдущая страница")])])]),s("div",{staticStyle:{display:"flex"}},[t._l(t.pages,(function(e){return e.name?s("li",{key:e.name},[s("button",{staticClass:"pagination-item-vis",class:{active:t.isPageActive(e.name)},attrs:{type:"button",disabled:e.isDisabled},on:{click:function(s){return t.onClickPage(e.name)}}},[t._v(" "+t._s(e.name)+" ")])]):t._e()})),s("li",{staticClass:"pagination-item"},[s("button",{staticClass:"pagination-item-vis-last",attrs:{type:"button",disabled:t.isInLastPage},on:{click:t.onClickLastPage}},[t._v(" ... ")])])],2),s("li",{staticClass:"pagination-item"},[s("button",{staticClass:"pagination_btn_next",attrs:{type:"button",disabled:t.isInLastPage},on:{click:t.onClickNextPage}},[s("span",[t._v("Следующая страница")])])])]):t._e()},i=[],o=(e("14d9"),{name:"MyPagination",props:{maxVisibleButtons:{type:Number,required:!1,default:3},totalPages:{type:Number,required:!0},perPage:{type:Number,required:!0},currentPage:{type:Number,required:!0}},computed:{startPage(){return 1===this.currentPage?1:this.currentPage===this.totalPages?this.totalPages-this.maxVisibleButtons+1:this.currentPage-1},pages(){const t=[];for(let s=this.startPage;s<=Math.min(this.startPage+this.maxVisibleButtons-1,this.totalPages);s++)t.push({name:s,isDisabled:s===this.currentPage});return t},isInFirstPage(){return 1===this.currentPage},isInLastPage(){return this.currentPage===this.totalPages}},methods:{onClickFirstPage(){this.$emit("pagechanged",1)},onClickPreviousPage(){this.$emit("pagechanged",this.currentPage-1)},onClickPage(t){this.$emit("pagechanged",t)},onClickNextPage(){this.$emit("pagechanged",this.currentPage+1)},onClickLastPage(){this.$emit("pagechanged",this.totalPages)},isPageActive(t){return this.currentPage===t}}}),r=o,n=(e("b6f6"),e("2877")),c=Object(n["a"])(r,a,i,!1,null,"6a37ee22",null);s["a"]=c.exports},b6f6:function(t,s,e){"use strict";e("21bf")},fc0a:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"store_block"},[s("div",{staticClass:"store_header_block"},[s("div",{staticClass:"store_header_container"},[s("div",{staticClass:"store_header_label"},[t._v(" "+t._s(t.$t("Shop_online"))+" ")]),s("div",{staticClass:"store_header_basket_block"},[s("router-link",{staticClass:"store_header_basket",attrs:{to:"/store/basket"}},[s("div",{staticClass:"store_header_basket_img"},[s("div",{staticClass:"store_header_basket_number"},[t._v(t._s(t.countOfGoods))])]),s("div",{staticClass:"store_header_basket_text"},[t._v(t._s(t.$t("Basket")))])])],1)])]),s("div",{staticClass:"store_main_block"},[s("div",{class:[t.isAuthenticated?t.basicClassStore:"",t.activeClassStore]},[t.isAuthenticated?s("div",{staticClass:"store_filter_container"},[t.isAuthenticated?s("div",{staticClass:"store_coins"},[s("div",{staticClass:"store_coins_text"},[t._v(t._s(t.$t("Number_of_coins"))+":")]),s("div",{staticClass:"store_coins_quantity"},[t._v(t._s(t.activeUserCoins))])]):t._e()]):t._e(),s("div",{staticClass:"store_list_goods"},[s("div",{staticClass:"store__product__list"},t._l(t.listOfGoods,(function(e){return s("ProductCard",{attrs:{item:e},on:{show:t.onShowModal,addInCart:t.buyGood}})})),1),t.currentItem?s("div",{directives:[{name:"show",rawName:"v-show",value:t.showModal,expression:"showModal"}],staticClass:"store_product_modal"},[s("div",{staticClass:"store_product_modal_back"}),s("div",{staticClass:"store_product_modal_front"},[s("router-link",{staticClass:"store_product_modal_more_info",attrs:{to:t.goodsUrl+t.currentItem.id}},[t._v(t._s(t.$t("More_information_about_the_product"))+" ")]),s("div",{staticClass:"store_product_modal_img_block"},[s("div",{staticClass:"store_product_modal_img_title"},[t._v(" "+t._s(t.currentItem.translations.find(({locale:s})=>s===t.currentLocale).name)+" ")]),s("div",{staticClass:"store_product_modal_img_available"},[t._v(" "+t._s(t.$t("Available_items"))+": "+t._s(t.currentItem.count)+" ")]),s("div",{staticClass:"store_product_modal_img_container"},[s("div",{staticClass:"store_one_product_desc_slider_container_arrow_right",on:{click:t.showNextImage}}),s("div",{staticClass:"store_one_product_desc_slider_container_arrow_left",on:{click:t.showPrevImage}}),s("div",{staticClass:"store_product_modal_img_miniatures"},t._l(t.currentItem.gallery,(function(e,a){return s("img",{key:a,staticClass:"store_product_modal_img_miniatures_item",class:[t.activeImg(e.image)?t.activeClass:"",t.basicClass],attrs:{src:t.backUrl+e.image},on:{click:function(s){t.currentImg=e.image},error:t.setAltImg}})})),0),s("div",{staticClass:"store_product_modal_img_main"},[s("img",{attrs:{src:t.backUrl+t.currentImg,width:"167",height:"167"},on:{error:t.setAltImg}})])])]),s("div",{staticClass:"store_product_modal_desc"},[s("div",{staticClass:"store_product_modal_desc_price"},[s("div",[t._v(t._s(t.$t("Price"))+":")]),s("div",{staticClass:"store_product_modal_desc_price_num"},[t._v(t._s(t.currentItem.price))])]),s("div",{staticClass:"store_product_modal_desc_tabs"},[s("div",{staticClass:"store_product_modal_tab",class:{store_product_modal_tab_active:"description"===t.currentModalTab},on:{click:function(s){t.currentModalTab="description"}}},[t._v(" "+t._s(t.$t("Description"))+" ")]),s("div",{staticClass:"store_product_modal_tab",class:{store_product_modal_tab_active:"characteristic"===t.currentModalTab},on:{click:function(s){t.currentModalTab="characteristic"}}},[t._v(" "+t._s(t.$t("Characteristic"))+" ")])]),"description"===t.currentModalTab?s("div",[s("div",{staticClass:"store_product_modal_tab_desc"},[t._v(" "+t._s(t.currentItem.translations.find(({locale:s})=>s===t.currentLocale).short_description)+" ")])]):t._e(),"characteristic"===t.currentModalTab?s("div",[s("div",{staticClass:"store_product_modal_tab_char"},t._l(t.currentItem.property_values,(function(e,a){return s("div",{key:a,staticClass:"store_product_modal_tab_char_item"},[s("div",{staticClass:"store_product_modal_tab_char_category"},[t._v(" "+t._s(e.key.translations.find(({locale:s})=>s===t.currentLocale).name)+" ")]),s("div",{staticClass:"store_product_modal_tab_char_text"},[t._v(" "+t._s(e.translations.find(({locale:s})=>s===t.currentLocale).name)+" ")])])})),0)]):t._e(),s("button",{staticClass:"store_product_modal_btn_buy",on:{click:function(s){return t.buyGood(t.currentItem.id)}}},[t._v(t._s(t.$t("Add_to_Basket")))]),s("button",{staticClass:"store_product_modal_btn_buy_now",on:{click:function(s){return t.buyGood(t.currentItem.id,!0)}}},[t._v(t._s(t.$t("Buy_now")))])]),s("div",{staticClass:"store_product_close_form",on:{click:t.closeModalWindow}})],1)]):t._e(),t.currentModalItem?s("ProductCardModal",{attrs:{item:t.currentModalItem}}):t._e(),s("div",{staticClass:"store_pagination"},[s("MyPagination",{attrs:{totalPages:t.totalPages,total:t.total,perPage:t.perPage,currentPage:t.currentPage},on:{pagechanged:t.onPageChange}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.showModalSuccessfullyAddToBasket,expression:"showModalSuccessfullyAddToBasket"}],staticClass:"store_modal"},[s("div",{staticClass:"store_modal_back",on:{click:function(s){t.showModal=!1}}}),s("div",{staticClass:"store_modal_front"},[s("div",{staticClass:"store_modal_front_title"},[t._v(t._s(t.$t("The_product_has_been_successfully_added_to_the_cart")))]),s("div",{staticClass:"store_modal_front_icon"}),s("router-link",{staticClass:"store_modal_front_btn",attrs:{to:"/store/basket"}},[t._v(t._s(t.$t("Go_to_cart")))]),s("div",{staticClass:"store_modal_close_form",on:{click:function(s){t.showModalSuccessfullyAddToBasket=!1}}})],1)])],1)])])])},i=[],o=(e("14d9"),e("2b0e")),r=e("6d26"),n=function(){var t=this,s=t._self._c;return s("div",{staticClass:"store__product"},[s("div",{staticClass:"store__product__image__wrapper"},[s("img",{staticClass:"store__product__image",attrs:{src:t.getImagePath(t.item.gallery.find(({is_main:t})=>!!t).image)},on:{error:t.setPlaceholder}}),s("div",{staticClass:"store__product__quick_view store__product__quick_view_mobile"},[s("button",{staticClass:"store__product__quick_view__button",on:{click:function(s){return t.show(t.item)}}},[t._v(" "+t._s(t.$t("store.products.quick_view"))+" ")])])]),s("div",{staticClass:"store__product__info"},[s("router-link",{staticClass:"store__product__title",attrs:{to:{name:"goods-details",params:{id:t.item.id}}}},[t._v(" "+t._s(t.item.translations.find(({locale:s})=>s===t.$i18n.locale).name)+" ")]),s("span",{staticClass:"store__product__count"},[t._v(t._s(t.$t("store.products.available"))+": "+t._s(t.item.count))])],1),s("div",{staticClass:"store__product__footer"},[s("div",{staticClass:"store__product__price"},[t._v(t._s(t.item.price))]),t.isAuthenticated?s("button",{staticClass:"store__product__button",attrs:{disabled:t.item.count<=0},on:{click:function(s){return t.addInCart(t.item.id)}}},[t._v(t._s(t.item.count<=0?t.$t("store.products.not_in_stock"):t.$t("store.products.in_cart")))]):t._e()])])},c=[],_=function(){var t=this,s=t._self._c;return s("b-modal",{attrs:{id:"show","hide-footer":"","hide-header":"",centered:"",size:"lg"}},[s("div",{staticClass:"store__product__modal",attrs:{id:"dialog"}},[s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"},on:{click:function(s){return t.$bvModal.hide("show")}}},[s("span",{attrs:{"aria-hidden":"true"}})]),s("div",{staticClass:"store__product__modal__item"},[s("div",{staticClass:"store__product__modal__slider"},[s("h4",{staticClass:"store__product__modal__title"},[t._v(t._s(t.item.translations.find(({locale:s})=>s===t.$i18n.locale).name))]),s("div",{staticClass:"store__product__modal__count"},[t._v("Доступно товаров: "+t._s(t.item.count))]),s("div",{staticClass:"store__product__modal__slider__carousel"},[s("div",{staticClass:"store__product__modal__slider__carousel__arrow prev",on:{click:t.prevImage}}),s("div",{staticClass:"store__product__modal__slider__carousel__arrow next",on:{click:t.nextImage}}),s("div",{staticClass:"store__product__modal__slider__carousel__current"},[s("img",{attrs:{src:t.getImageUrl(t.currentImg)}})]),s("div",{staticClass:"store__product__modal__slider__carousel__pagination"},t._l(t.item.gallery.sort((t,s)=>t.is_main>s.is_main?-1:t.is_main<s.is_main?1:0),(function(e){return s("button",{staticClass:"store__product__modal__slider__carousel__pagination__item",on:{click:function(s){return t.setCurrentImage(e.image)}}},[s("img",{attrs:{src:t.getImageUrl(e.image)}})])})),0)])]),s("div",{staticClass:"store__product__modal__info"},[s("div",{staticClass:"store__product__modal__info__price"},[t._v(" "+t._s(t.$t("store.products.price"))+": "),s("span",[t._v(t._s(t.item.price))])]),s("div",{staticClass:"store__product__modal__info__tabs"},[s("button",{class:{active:"description"===t.currentTab},on:{click:function(s){t.currentTab="description"}}},[t._v("Описание")]),s("button",{class:{active:"properties"===t.currentTab},on:{click:function(s){t.currentTab="properties"}}},[t._v("Характеристика")])]),s("div",{staticClass:"store__product__modal__info__tabs__content"},[s("p",{directives:[{name:"show",rawName:"v-show",value:"description"===t.currentTab,expression:"currentTab === 'description'"}]},[t._v(" "+t._s(t.item.translations.find(({locale:s})=>s===t.$i18n.locale).short_description)+" ")]),s("ul",{directives:[{name:"show",rawName:"v-show",value:"properties"===t.currentTab,expression:"currentTab === 'properties'"}]},t._l(t.item.property_values,(function(e){return s("li",{key:e.id},[s("span",[t._v(t._s(e.key.translations.find(({locale:s})=>s===t.$i18n.locale).name))]),s("span",[t._v(t._s(e.translations.find(({locale:s})=>s===t.$i18n.locale).name))])])})),0)]),s("button",{staticClass:"btn__main btn__main_accent btn__main_full-width",on:{click:function(s){return t.addInCart(t.item.id)}}},[t._v("Добавить в корзину")]),s("button",{staticClass:"btn__main btn__main_secondary btn__main_full-width"},[t._v("Купить сейчас")])])]),s("router-link",{staticClass:"store__product__modal__more",attrs:{to:{name:"goods-details",params:{id:t.item.id}}}},[t._v(" Больше информации о товаре ")])],1)])},l=[],d={name:"ProductCardModal",props:{item:{required:!0}},data(){return{manualNavigation:0,currentImg:null,currentTab:"description"}},methods:{getImageUrl(t){return`${API_ROOT}/images/goods/${t}`},prevImage(){const t=this.item.gallery.findIndex(({image:t})=>t===this.currentImg);this.currentImg=0===t?this.item.gallery[this.item.gallery.length-1].image:this.item.gallery[t-1].image},nextImage(){const t=this.item.gallery.findIndex(({image:t})=>t===this.currentImg);this.currentImg=t===this.item.gallery.length-1?this.item.gallery[0].image:this.item.gallery[t+1].image},setCurrentImage(t){this.currentImg=t},addInCart(t){const s={good_id:t},e=localStorage.getItem("basket_id");e&&(s["basket_id"]=e),this.$http.post(API_ROOT+"/api/shop/basket/add",s).then(({body:t})=>{e||localStorage.setItem("basket_id",t.data.id),o["default"].toastr({message:"Success",description:"Product add to cart",type:"success"})}).catch(t=>console.log(t))}},mounted(){this.$root.$on("bv::modal::show",(t,s)=>{"show"===s&&(this.currentImg=this.item.gallery.find(({is_main:t})=>!!t).image)}),this.$root.$on("bv::modal::hide",(t,s)=>{"show"===s&&(this.currentImg=null)})}},u=d,m=e("2877"),g=Object(m["a"])(u,_,l,!1,null,"69ffbbea",null),h=g.exports,p={name:"ProductCard",components:{ProductCardModal:h},data(){return{currentModalItem:null,isAuthenticated:!!localStorage.getItem("token")}},props:{item:{required:!0}},methods:{getImagePath(t){return`${API_ROOT}/images/goods/${t}`},setPlaceholder(t){t.target.src=this.noPhoto},show(t){this.$emit("show",t)},addInCart(t){this.$emit("addInCart",t)}}},v=p,b=Object(m["a"])(v,n,c,!1,null,"87420912",null),C=b.exports,f={name:"Store",components:{MyPagination:r["a"],ProductCard:C,ProductCardModal:h},data(){return{currentModalItem:null,showModal:!1,showModalSuccessfullyAddToBasket:!1,currentModalTab:"description",basketNumber:10,deliveryNumber:0,currentPage:2,perPage:0,total:0,totalPages:0,listOfGoods:[],storeData:[],backUrl:window.API_ROOT+"/images/goods/",goodsUrl:"/store/",currentItem:null,checkList:[],showList:!1,basketData:[],userCoins:null,currentImg:"",activeClass:"store_product_modal_img_miniatures_item_active",basicClass:"store_product_modal_img_miniatures_item",noPhoto:e("24b7"),images:[],isAuthenticated:!!localStorage.getItem("token"),activeClassStore:"store_main_container_not_auth",basicClassStore:"store_main_container",currentLocale:this.$i18n.locale}},methods:{onShowModal(t){this.showModal=!0,this.currentItem=this.listOfGoods.find(s=>s.id===t.id),this.currentItem.gallery=this.currentItem.gallery.sort((t,s)=>t.is_main>s.is_main?-1:t.is_main<s.is_main?1:0),this.currentImg=this.currentItem.gallery.find(({is_main:t})=>!!t).image,this.images=this.imagesArr(t)},handleHover(t){this.isHovered=t},onPageChange(t){this.currentPage=t},showBtn(t){this.showModal=!0,this.currentItem=this.listOfGoods.find(s=>s.id===t.id),this.currentItem.gallery=this.currentItem.gallery.sort((t,s)=>t.is_main>s.is_main?-1:t.is_main<s.is_main?1:0),this.currentImg=this.currentItem.gallery.find(({is_main:t})=>!!t).image,this.images=this.imagesArr(t)},shopGoods(){this.$http.get(API_ROOT+"/api/shop/goods").then(t=>{this.storeData=t.data,this.listOfGoods=t.data.data,this.currentPage=t.data.current_page,this.perPage=t.data.per_page,this.total=t.data.total,this.totalPages=Math.ceil(this.total/this.perPage)}).catch(t=>{console.log(t)})},buyGood(t,s=!1){const e={good_id:t},a=localStorage.getItem("basket_id");a&&(e["basket_id"]=a),localStorage.getItem("token")||localStorage.getItem("session_id")?this.$http.post(API_ROOT+"/api/shop/basket/add",e).then(({body:t})=>{a||localStorage.setItem("basket_id",t.data.id),this.showModalSuccessfullyAddToBasket=!0,s?this.$router.push("/store/basket"):this.showModalSuccessfullyAddToBasket=!0}).then(()=>this.quantityGoodsInBasket()).catch(t=>console.error(t)):o["default"].toastr({description:this.$t("add_product"),type:"error"})},quantityGoodsInBasket(){localStorage.getItem("basket_id")&&this.$http.get(API_ROOT+`/api/shop/basket/goods?basket_id=${localStorage.getItem("basket_id")} `).then(t=>{this.basketData=t.data.data}).catch(t=>{o["default"].toastr({message:"Error",description:t.message,type:"error"})})},userOrders(){this.$http.get(API_ROOT+"/api/shop/orders").then(t=>{console.log("userOrders"),console.log(t)}).catch(t=>{console.log(t)})},closeModalWindow(){this.showModal=!1,this.currentImg="",this.images=[]},activeImg(t){return this.currentImg===t},setAltImg(t){t.target.src=this.noPhoto},mainImage(t){for(let s=0;s<t.gallery.length;s++)if(1===t.gallery[s].is_main)return t.gallery[s].image},imagesArr(t){let s=[];for(let e=0;e<t.gallery.length;e++)s.push(t.gallery[e].image);return s},showNextImage(){let t=this.images.findIndex(t=>t===this.currentImg);t===this.images.length-1?this.currentImg=this.images[0]:this.currentImg=this.images[t+1]},showPrevImage(){let t=this.images.findIndex(t=>t===this.currentImg);this.currentImg=0===t?this.images[this.images.length-1]:this.images[t-1]}},mounted(){this.shopGoods(),this.quantityGoodsInBasket(),this.$root.$on("bv::modal::hide",(t,s)=>{"show"===s&&(this.currentModalItem=null)})},computed:{countOfGoods(){let t=0;for(let s=0;s<this.basketData.length;s++)t+=this.basketData[s].pivot.count;return t},activeUserCoins(){return localStorage.getItem("coins")?this.userCoins=localStorage.getItem("coins"):this.userCoins=0}}},I=f,k=Object(m["a"])(I,a,i,!1,null,"6dc76f78",null);s["default"]=k.exports}}]);
//# sourceMappingURL=chunk-295f4a75.da2f738d.js.map