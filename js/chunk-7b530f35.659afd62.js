(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b530f35"],{"21bf":function(t,a,e){},"376d":function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t._self._c;return a("div",{staticClass:"my_orders_block"},[a("div",{staticClass:"my_orders_header_block"},[a("div",{staticClass:"my_orders_header_container"},[a("div",{staticClass:"my_courses_header_label"},[t._v(" "+t._s(t.$t("My_orders"))+" ")])])]),a("div",{staticClass:"my_orders_main_block"},[a("div",{staticClass:"my_orders_main_container"},[a("div",{staticClass:"order__list"},t._l(t.orderList,(function(t){return a("OrderCard",{key:t.id,attrs:{order:t}})})),1),a("div",{staticClass:"my_orders_pagination"},[a("MyPagination",{attrs:{totalPages:Math.ceil(t.total/t.perPage),total:t.total,perPage:t.perPage,currentPage:t.currentPage},on:{pagechanged:t.onPageChange}})],1)])])])},s=[],i=e("6d26"),_=function(){var t=this,a=t._self._c;return a("div",{staticClass:"order__card"},[a("span",{staticClass:"order__card__status"},[t._v(t._s(t.order.status.translations.find(({locale:a})=>a===t.$i18n.locale).name))]),a("div",{staticClass:"order__card__slider"},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.order.goods.length>1,expression:"order.goods.length > 1"}],staticClass:"order__card__slider__arrow order__card__slider__arrow_left",on:{click:function(a){return t.prevProduct(t.order.goods.length)}}}),a("div",{directives:[{name:"show",rawName:"v-show",value:t.order.goods.length>1,expression:"order.goods.length > 1"}],staticClass:"order__card__slider__arrow order__card__slider__arrow_right",on:{click:function(a){return t.nextProduct(t.order.goods.length)}}}),a("carousel",{attrs:{navigationNextLabel:"next",paginationActiveColor:"#6F4189",paginationColor:"white","per-page":1,navigateTo:t.manualNavigation,paginationEnabled:!1}},t._l(t.order.goods,(function(e){return a("slide",{key:e.id},[a("div",{staticClass:"order__card__slider__item"},[a("img",{staticClass:"order__card__slider__item__img",attrs:{src:t.getImageUrl(e.gallery.find(({is_main:t})=>!!t).image)}}),a("div",{staticClass:"order__card__slider__item__text"},[t._v(t._s(e.translations.find(({locale:a})=>a===t.$i18n.locale).name))])]),a("router-link",{staticClass:"order__card__slider__item__view",attrs:{to:{name:"goods-details",params:{id:e.id}}}},[t._v(" Посмотреть товар ")])],1)})),1)],1),a("div",{staticClass:"order__card__info"},[a("div",{staticClass:"order__card__info__number"},[t._v(" Заказ № "+t._s(t.order.id)+" ")]),t._e(),a("div",{staticClass:"order__card__info__goods"},[a("div",{staticClass:"order__card__info__price"},[a("div",{staticClass:"order__card__info__goods__label"},[t._v("Стоимость предметов")]),a("div",{staticClass:"order__card__info__goods__number"},[t._v(t._s(t.getGoodsTotalPrice(t.order.goods)))])]),a("div",{staticClass:"order__card__info__quantity"},[a("div",{staticClass:"order__card__info__goods__label"},[t._v("Количество")]),a("div",{staticClass:"order__card__info__goods__number"},[t._v(t._s(t.getGoodsCount(t.order.goods))+" позиций")])])]),a("div",{staticClass:"order__card__info__delivery"},[t._v(" Доставка ")]),t._m(0),t._m(1),a("div",{staticClass:"order__card__info__purchase__date"},[t._v("Дата покупки: "+t._s(t._f("formatDate")(t.order.updated_at)))])])])},o=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"order__card__info__delivery__info"},[a("div",{staticClass:"order__card__info__delivery__info__status"},[t._v("Готов к доставке")]),a("div",{staticClass:"order__card__info__delivery__info__date"},[t._v("- 3 дня доставки")])])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"order__card__info__delivery__bar"},[a("div",{staticClass:"order__card__info__delivery__bar__part done"}),a("div",{staticClass:"order__card__info__delivery__bar__part done"}),a("div",{staticClass:"order__card__info__delivery__bar__part done"}),a("div",{staticClass:"order__card__info__delivery__bar__part"})])}],n={name:"OrderCard",props:{order:{required:!0,type:Object}},data(){return{manualNavigation:0}},methods:{getImageUrl(t){return`${API_ROOT}/images/goods/${t}`},getGoodsCount(t){let a=0;for(let e=0;e<t.length;e++)a+=t[e].pivot.count;return a},getGoodsTotalPrice(t){let a=0;for(let e=0;e<t.length;e++)a+=t[e].pivot.count*t[e].price;return a},nextProduct(t){this.manualNavigation=this.manualNavigation>=t-1?0:this.manualNavigation+1},prevProduct(t){this.manualNavigation=this.manualNavigation<=0?t-1:this.manualNavigation-1}}},d=n,l=e("2877"),c=Object(l["a"])(d,_,o,!1,null,"d974c672",null),g=c.exports,u={name:"MyOrders",components:{MyPagination:i["a"],OrderCard:g},data(){return{currentPage:1,total:0,perPage:9,orderList:[]}},methods:{userOrders(){this.$http.get(API_ROOT+"/api/shop/orders").then(({data:t})=>{this.orderList=t.data,this.currentPage=t.current_page,this.total=t.total,this.perPage=t.per_page}).catch(t=>console.error(t))},onPageChange(t){this.$http.get(API_ROOT+"/api/shop/orders",{params:{page:t}}).then(({data:t})=>{this.orderList=t.data,this.currentPage=t.current_page,this.total=t.total}).catch(t=>console.error(t))}},mounted(){this.userOrders()}},v=u,h=Object(l["a"])(v,r,s,!1,null,null,null);a["default"]=h.exports},"6d26":function(t,a,e){"use strict";var r=function(){var t=this,a=t._self._c;return t.totalPages>1?a("ul",{staticClass:"pagination"},[a("li",{staticClass:"pagination-item"},[a("button",{staticClass:"pagination_btn_prev",attrs:{type:"button",disabled:t.isInFirstPage},on:{click:t.onClickPreviousPage}},[a("span",[t._v("Предыдущая страница")])])]),a("div",{staticStyle:{display:"flex"}},[t._l(t.pages,(function(e){return e.name?a("li",{key:e.name},[a("button",{staticClass:"pagination-item-vis",class:{active:t.isPageActive(e.name)},attrs:{type:"button",disabled:e.isDisabled},on:{click:function(a){return t.onClickPage(e.name)}}},[t._v(" "+t._s(e.name)+" ")])]):t._e()})),a("li",{staticClass:"pagination-item"},[a("button",{staticClass:"pagination-item-vis-last",attrs:{type:"button",disabled:t.isInLastPage},on:{click:t.onClickLastPage}},[t._v(" ... ")])])],2),a("li",{staticClass:"pagination-item"},[a("button",{staticClass:"pagination_btn_next",attrs:{type:"button",disabled:t.isInLastPage},on:{click:t.onClickNextPage}},[a("span",[t._v("Следующая страница")])])])]):t._e()},s=[],i=(e("14d9"),{name:"MyPagination",props:{maxVisibleButtons:{type:Number,required:!1,default:3},totalPages:{type:Number,required:!0},perPage:{type:Number,required:!0},currentPage:{type:Number,required:!0}},computed:{startPage(){return 1===this.currentPage?1:this.currentPage===this.totalPages?this.totalPages-this.maxVisibleButtons+1:this.currentPage-1},pages(){const t=[];for(let a=this.startPage;a<=Math.min(this.startPage+this.maxVisibleButtons-1,this.totalPages);a++)t.push({name:a,isDisabled:a===this.currentPage});return t},isInFirstPage(){return 1===this.currentPage},isInLastPage(){return this.currentPage===this.totalPages}},methods:{onClickFirstPage(){this.$emit("pagechanged",1)},onClickPreviousPage(){this.$emit("pagechanged",this.currentPage-1)},onClickPage(t){this.$emit("pagechanged",t)},onClickNextPage(){this.$emit("pagechanged",this.currentPage+1)},onClickLastPage(){this.$emit("pagechanged",this.totalPages)},isPageActive(t){return this.currentPage===t}}}),_=i,o=(e("b6f6"),e("2877")),n=Object(o["a"])(_,r,s,!1,null,"6a37ee22",null);a["a"]=n.exports},b6f6:function(t,a,e){"use strict";e("21bf")}}]);
//# sourceMappingURL=chunk-7b530f35.659afd62.js.map