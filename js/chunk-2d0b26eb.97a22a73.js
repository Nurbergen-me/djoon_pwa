(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b26eb"],{"23a5":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"theme_one_block"},[t("div",{staticClass:"theme_one_header_block"},[t("div",{staticClass:"theme_one_header_container"},[t("div",{staticClass:"theme_one_header_label"},[e._v(" "+e._s(e.course.title)+" ")])])]),t("div",{staticClass:"theme_one_main_block"},[t("div",{staticClass:"theme_one_main_container"},[t("div",{staticClass:"theme_one_content_container"},[t("router-link",{staticClass:"theme_one_content_container_btn_back",attrs:{to:{name:"course-module",params:{slug:e.$route.params.slug,module:e.currentModuleId}}}},[t("div",{staticClass:"theme_one_content_container_btn_text"},[e._v(e._s(e.$t("Back")))])]),t("div",{staticClass:"theme_one_plot"},e._l(e.currentModule.themes,(function(s){return e.currentModule&&e.currentModule.themes?t("div",{staticClass:"theme_one_plot_theme"},[t("div",{staticClass:"theme_one_plot_theme_active_label"},[e._v(e._s(s.name))])]):e._e()})),0),e.currentModule&&e.currentModule.quizzes?t("div",{staticClass:"theme_one_plot"},[t("div",{staticClass:"theme_one_plot_theme_active"},[t("div",{staticClass:"theme_one_plot_theme_active_label"},[e._v(e._s(e.$t("Testing")))]),e._l(e.currentModule.quizzes,(function(s){return t("router-link",{staticClass:"theme_one_plot_theme_item exercise",staticStyle:{"text-decoration":"none"},attrs:{to:{name:"course-exercise",params:{slug:e.$route.params.slug,quiz:s.id}}}},[e._v(" "+e._s(s.title)+" ")])}))],2)]):e._e()],1),t("div",{staticClass:"theme_one_exercises_desc"},[e.error&&e.success?t("div",{staticClass:"theme_one_exercises_desc_text_container"},[t("div",{staticClass:"theme_one_desc_test w-100",staticStyle:{height:"400px"}},[t("div",{staticClass:"theme_one_modal_result_bad"},[t("div",{staticClass:"theme_one_modal_bad_text_block"},[t("div",{staticClass:"theme_one_modal_bad_result_text"},[e._v(e._s(e.$t("Data_not_found")))]),t("div",{staticClass:"theme_one_modal_bad_result_btn"},[e._v(e._s(e.$t("Try_again")))])]),t("div",{staticClass:"theme_one_modal_result_img"})])])]):t("div",{staticClass:"theme_one_exercises_desc_text_container"},[e.success?t("div",{staticClass:"theme_one_modal_save_result"},[t("div",{staticClass:"theme_one_modal_result_text"},[e._v(e._s(e.$t("Response_saved_successfully")))]),t("div",{staticClass:"theme_one_modal_result_img"})]):e._e(),e.finished&&e.result<e.quiz.passing_score?t("div",{staticClass:"theme_one_modal_result_bad"},[t("div",{staticClass:"theme_one_modal_bad_text_block"},[t("div",{staticClass:"theme_one_modal_bad_result_text w-100"},[t("h5",[e._v(e._s(e.$t("Sorry_you_did_not_pass_the_test")))]),t("br"),t("h6",[e._v(e._s(e.$t("Your_score"))+": "+e._s(e.percent)+"%. Вы набрали "+e._s(e.result)+" из "+e._s(e.max_score)+" баллов. "),t("br"),t("br"),e._v(" Проходной балл "+e._s(e.passing_score))])]),t("div",{staticClass:"theme_one_modal_bad_result_btn pointer",on:{click:e.reloadExercise}},[e._v(e._s(e.$t("try_again")))])])]):e._e(),e.finished&&e.result>=e.quiz.passing_score?t("div",{staticClass:"theme_one_modal_result_good"},[t("div",{staticClass:"theme_one_modal_result_text"},[e._v(" "+e._s(e.$t("Congratulations!_You_have_passed_the_test"))+" "),t("br"),t("br"),e._v(" "+e._s(e.$t("Your_score"))+": "+e._s(e.percent)+"%. Вы набрали "+e._s(e.result)+" из "+e._s(e.max_score)+" баллов. Проходной балл "+e._s(e.passing_score)+" ")])]):e._e(),t("div",{staticClass:"theme_one_desc_title"},[e._v(e._s(e.finished?"Результаты теста: ":"")+e._s(e.quiz.title))]),t("div",{staticClass:"theme_one_desc_test w-100"},[e.error?t("div",{staticClass:"theme_one_modal_result_bad"},[t("div",{staticClass:"theme_one_modal_bad_text_block"},[t("div",{staticClass:"theme_one_modal_bad_result_text"},[e._v(e._s(e.$t("An_error_has_occurred")))]),t("div",{staticClass:"theme_one_modal_bad_result_btn"},[e._v(e._s(e.$t("Try_again")))])]),t("div",{staticClass:"theme_one_modal_result_img"})]):t("div",[e.currentQuestion&&e.currentQuestion.text?t("div",{staticClass:"theme_one_desc_text",domProps:{innerHTML:e._s(e.currentQuestion.text)}}):e._e(),e.currentQuestion&&e.currentQuestion.file?t("div",["audio"===e.currentQuestion.file.type?t("audio",{attrs:{src:e.apiRoot+e.currentQuestion.file.path,controls:""}}):e._e()]):e._e(),e.currentQuestion&&e.currentQuestion.file?t("div",{staticClass:"mb-5 w-100 text-center"},["file"===e.currentQuestion.file.type?t("a",{staticClass:"theme_one_desc_download",attrs:{href:e.apiRoot+e.currentQuestion.file.path,target:"_blank"}},[e._v(" "+e._s(e.$t("Download_file"))+" ")]):e._e()]):e._e(),e.currentQuestion&&"TYPE_SINGLE"===e.currentQuestion.type||e.currentQuestion&&"TYPE_MULTIPLE"===e.currentQuestion.type?t("div",{staticClass:"my_courses_list_radio_block"},e._l(e.currentQuestion.answers,(function(s){return e.currentQuestion&&e.currentQuestion.answers?t("div",{staticClass:"my_courses_radio_item"},["TYPE_SINGLE"===e.currentQuestion.type?t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedAnswer,expression:"selectedAnswer"}],staticClass:"my_courses_list_radio",attrs:{id:"answer"+s.id,type:"radio",name:"answer[]"},domProps:{value:s.id,checked:e._q(e.selectedAnswer,s.id)},on:{change:function(t){e.selectedAnswer=s.id}}}):e._e(),"TYPE_MULTIPLE"===e.currentQuestion.type?t("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedAnswer,expression:"selectedAnswer"}],staticClass:"my_courses_list_radio",attrs:{id:"answer"+s.id,type:"checkbox",name:"answer[]"},domProps:{value:s.id,checked:Array.isArray(e.selectedAnswer)?e._i(e.selectedAnswer,s.id)>-1:e.selectedAnswer},on:{change:function(t){var i=e.selectedAnswer,r=t.target,n=!!r.checked;if(Array.isArray(i)){var o=s.id,a=e._i(i,o);r.checked?a<0&&(e.selectedAnswer=i.concat([o])):a>-1&&(e.selectedAnswer=i.slice(0,a).concat(i.slice(a+1)))}else e.selectedAnswer=n}}}):e._e(),t("label",{staticClass:"my_courses_radio_label pointer pt-3",attrs:{for:"answer"+s.id},domProps:{innerHTML:e._s(s.text)}})]):e._e()})),0):t("div",[t("textarea",{directives:[{name:"model",rawName:"v-model",value:e.selectedAnswerRaw,expression:"selectedAnswerRaw"}],staticClass:"form-control mb-5",domProps:{value:e.selectedAnswerRaw},on:{input:function(t){t.target.composing||(e.selectedAnswerRaw=t.target.value)}}})])])]),e.finished?e._e():t("div",{staticClass:"theme_one_desc_btn"},[e.firstQuestion?e._e():t("a",{staticClass:"theme_one_desc_btn_back pointer",on:{click:e.prev}},[e._v(e._s(e.$t("Back")))]),e.lastQuestion?e._e():t("a",{staticClass:"theme_one_desc_btn_next pointer",on:{click:e.next}},[e._v(e._s(e.$t("Further")))]),e.lastQuestion?t("a",{staticClass:"theme_one_desc_btn_next pointer",on:{click:e.finish}},[e._v(e._s(e.$t("Finish")))]):e._e()])])])])])])},r=[],n=(s("14d9"),s("2b0e")),o={name:"CourseExercise",data(){return{finished:!1,results:[],result:0,percent:0,passing_score:0,max_score:0,success:!1,error:!1,quiz:!1,apiRoot:window.API_ROOT,selectedAnswer:[],selectedAnswerRaw:null,currentQuestionId:0,course:!1}},methods:{getQuiz(){let e=this.$route.params.slug,t=this.$route.params.quiz;this.$http.get(`${this.apiRoot}/api/course/${e}/quiz/${t}`).then(e=>{this.quiz=e.body}).catch(e=>console.log(e)).finally(()=>{})},getCourseDetails(){let e=this.$route.params.slug;this.$http.get(`${this.apiRoot}/api/course/${e}`).then(e=>{this.course=e.body}).catch(e=>console.log(e)).finally(()=>{})},saveAnswer(){let e=null!==this.selectedAnswerRaw?{answer:this.selectedAnswerRaw,answer_raw:this.selectedAnswerRaw,question_id:this.currentQuestion.id,quiz_id:this.quiz.id}:{answer:this.selectedAnswer,question_id:this.currentQuestion.id,quiz_id:this.quiz.id};this.$http.post(this.apiRoot+"/api/course/quiz/answer/store",e).then(e=>{}).catch(e=>{}).finally(()=>{})},prev(){this.currentQuestionId&&(("null"!==this.selectedAnswerRaw||this.selectedAnswer.length)&&this.saveAnswer(),this.currentQuestionId--,this.error=!1,this.success=!1,this.selectedAnswer=[],this.selectedAnswerRaw=null)},next(){if("object"==typeof this.selectedAnswer&&0==this.selectedAnswer.length&&(this.selectedAnswer=""),this.selectedAnswer)return console.log(this.selectedAnswer),this.saveAnswer(),this.currentQuestionId++,this.error=!1,this.success=!1,this.selectedAnswer=[],void(this.selectedAnswerRaw=null);n["default"].toastr({description:"Необходимо выбрать ответ",type:"error"})},finish(){"object"==typeof this.selectedAnswer&&0==this.selectedAnswer.length&&(this.selectedAnswer=""),this.selectedAnswer?(this.saveAnswer(),"DEFAULT"===this.quiz.mode?this.$http.get(`${this.apiRoot}/api/course/quiz/get-user-answers/${this.quiz.id}`).then(e=>{this.results=e.body.data,this.result=e.body.result,this.passing_score=e.body.passing_score,this.percent=e.body.percent,this.max_score=e.body.max_score,this.error=!1,this.success=!1,this.finished=!0}).catch(e=>{n["default"].toastr({message:"Error",description:"Не удалось завершить тест",type:"error"})}).finally(()=>{}):this.$router.push({name:"course-module",params:{slug:this.$route.params.slug,module:this.currentModuleId}})):n["default"].toastr({description:"Необходимо выбрать ответ",type:"error"})},reloadExercise(){window.location.reload()}},computed:{currentQuestion(){if(this.quiz.questions)return this.quiz.questions.find((e,t)=>t==this.currentQuestionId)},currentModule:function(){return!!(this.course&&this.course.modules&&this.quiz.owner)&&this.course.modules.find(e=>e.id===this.quiz.owner.id)},currentModuleId:function(){if(this.quiz&&this.quiz.owner)return this.quiz.owner.id},firstQuestion:function(){return 0==this.currentQuestionId},lastQuestion:function(){return this.currentQuestionId+1===this.quiz.questions.length}},mounted(){this.getCourseDetails(),this.getQuiz()},beforeRouteUpdate(e,t,s){s(),this.getCourseDetails(),this.getQuiz()}},a=o,_=s("2877"),c=Object(_["a"])(a,i,r,!1,null,"280b54cc",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-2d0b26eb.97a22a73.js.map